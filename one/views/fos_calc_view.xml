<odoo>
    <data>
        <record model="ir.ui.view" id="view_fos_sale_calculator_tree">
            <field name="name">Sale Calculator</field>
            <field name="model">fos.calc</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="unit_id"/>
                    <field name="customer_id"/>
                </tree>
            </field>
        </record>
    
        <record model="ir.ui.view" id="view_fos_sale_calculator_form">
            <field name="name">Sale Calculator</field>
            <field name="model">fos.calc</field>
            <field name="arch" type="xml">
             <form>
                    <header>
                         <field name="state" widget="statusbar" statusbar_visible="draft,cancel,confirm"/>
                         <button name="action_cancel" vqir_state="cancel"  type="object" string="Cancel"
                            attrs="{'invisible': [('state', 'not in', ('draft'))]}"
                            confirm="Are you sure to Cancel?"/>
                         <button name="action_confirm" vqir_state="confirm"  type="object" string="Confirm"
                            attrs="{'invisible': [('state', 'not in', ('draft'))]}"
                            confirm="Are you sure to Confirm?"/>
                         <button name="print_sale_calculator" class="oe_highlight"
                            string="Print Sale Quotation" type="object"/>
                    </header>
    	        <sheet>
                    <group>
                        <group>                    
                            <h1><field name="name"/></h1>
                        </group>
                        <group>
                            <h1><field name="sale_order_id" attrs="{'visible': [('state','=','confirm')]}" readonly="1"/></h1>
                        </group>
                    </group>
                    <group>
                            <field name="customer_id" attrs="{'readonly': [('state','!=','draft')]}"/>
                    </group>
                    <group>
                            <field name="unit_id" domain="[('sub_type','=','units')]" attrs="{'readonly': [('state','!=','draft')]}"
                            options="{'no_create': True, 'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
                            <field name="srp" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="less_discount" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="net_cash" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="downpayment" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="dp_percent" widget="percentage" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="amount_financed" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="reservation_fee" attrs="{'readonly': [('state','!=','draft')]}"/>                                                                                                                                      
                    </group>
                    <group>
                            <field name="cash_outlay" widget="radio" attrs="{'readonly': [('state','!=','draft')]}"/>
                    </group>
                    <group string="Standard" attrs="{'invisible': [('cash_outlay','!=','standard')]}">
                                <field name="bank_id" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="s_term" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="monthly_amortization_std" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="downpayment" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="insurance_std" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="chattel_mortgage_std" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="lto_registration_std" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="oma_std" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="addons_total" attrs="{'readonly': [('state','!=','draft')]}"/>   
                    </group>
                    <group string="OMA" attrs="{'invisible': [('cash_outlay','!=','oma')]}">
                                <field name="bank_id" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="o_term" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="monthly_amortization_oma" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="downpayment" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="insurance_oma" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="chattel_mortgage_oma" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="lto_registration_oma" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="oma_oma" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="addons_total" attrs="{'readonly': [('state','!=','draft')]}"/>                           
                    </group>
                    <group>
                      <field name="addons" mode="tree,kanban" attrs="{'readonly': [('state','!=','draft')]}">            
                        <tree string="Additional Accessories" editable="bottom">
                            <field name="product_id" domain="[('sub_type','=','parts')]"
                            options="{'no_create': True, 'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
                            <field name="description"/>                           
                            <field name="amount"/>
                        </tree>       
                      </field> 
                    </group>  
                    <group>
                                <field name="less_total"/>
                    </group>
                    <group>
                      <field name="less" mode="tree,kanban" attrs="{'readonly': [('state','!=','draft')]}">     
                        <tree string="Less" editable="bottom">
                            <field name="product_id" domain="[('sub_type','=','parts')]"
                            options="{'no_create': True, 'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
                            <field name="description"/>
                            <field name="amount_less"/>
                        </tree>       
                      </field> 
                    </group>  
                    <group attrs="{'invisible': [('cash_outlay','!=','standard')]}">
                            <field name="net_cash_outlay_std"/>
                    </group>
                    <group attrs="{'invisible': [('cash_outlay','!=','oma')]}">
                            <field name="net_cash_outlay_oma"/>
                    </group>
                </sheet>
             </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="sale_calculator_act_window">
            <field name="name">Sale Calculator</field>
            <field name="res_model">fos.calc</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_fos_sale_calculator_tree"/>
        </record>

        <record model="ir.sequence" id="fos_calc_seq">
            <field name="name">FOS Calculator</field>
            <field name="code">fos.calc.seq</field>
            <field name="prefix">SC#</field>
            <field name="padding">6</field>
        </record>

        <menuitem id="sales_unit_maintenance_menu" 
            name="Maintenance" 
            parent="fos_sales_units_quotations_orders_menu" 
            sequence="3"/>

        <menuitem id="sale_calculator_menu"
            name="Calculator"
            action="sale_calculator_act_window"
            parent="sales_unit_maintenance_menu"
            sequence="4"/> 
    </data>
</odoo>      