<odoo>
  <data>
    <record model="ir.ui.view" id="fos_stock_move_line">
      <field name="name">fos.stock.move.line.tree</field>
      <field name="model">stock.move.line</field>
      <field name="inherit_id" ref="stock.view_stock_move_line_operation_tree"/>
      <field name="arch" type="xml">
        <xpath expr="//tree/field[@name='lot_id']" position="replace">
            <field name="lot_id" attrs="{'readonly': [('in_entire_package', '=', True)]}" domain="[('product_id', '=', parent.product_id)]" groups="stock.group_production_lot" context="{'default_product_id': parent.product_id, 'active_picking_id': picking_id}"/>
        </xpath>
        <xpath expr="//tree/field[@name='lot_name']" position="replace">
        </xpath>
      </field>
    </record>
  </data>
</odoo>
