<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="view_fos_vqir_report_search" model="ir.ui.view">
		<field name="name">view.fos.vqir.report.search</field>
		<field name="model">view.fos.vqir.report1</field>
		<field name="arch" type="xml">
			<search string="VQIR Report">
				<field name="vqir_date"/>
				<filter string="This Year" name="year" invisible="0" 
                                  domain="[('vqir_date','&lt;=', time.strftime('%%Y-12-31')),('vqir_date','&gt;=',time.strftime('%%Y-01-01'))]"/>
 				<group expand="1" string="Group by">
                        <filter string="Dealer" name="by_dealer" context="{'group_by':'dealer_id'}"/>
                        <filter string="State" name="by_state" context="{'group_by':'vqir_state'}"/>
                        <filter string="Date" name="by_date" context="{'group_by':'vqir_date'}"/>
                </group>
			</search>
		</field>		
	</record>

	<record model="ir.ui.view" id="view_one_vqir_report_1_tree">
		<field name="name">view.one.vqir.report.tree</field>
		<field name="model">view.fos.vqir.report1</field>
		<field name="arch" type="xml">
			<tree string="VQIR Analysis" create="false" edit="false" delete="false">
				<field name="name"/>
					<field name="name"/>
					<field name="fmpi_vqir_id"/> 
					<field name="si_number"/>
					<field name="si_date"/>
					<field name="parts_number"/>
					<field name="parts_desc"/>
					<field name="parts_qty"/>
					<field name="parts_cost"/>
					<field name="parts_hf_amount"/>
					<field name="parts_total"/>
					<field name="job_code"/>
					<field name="job_code_desc"/>
					<field name="job_qty"/>
					<field name="job_cost"/>
					<field name="approved_amount"/>
					<field name="part_id"/>
					<field name="job_id"/>
					<field name="job_approved_amount"/>
					<field name="dealer_pj_id"/>
					<field name="dealer_id"/>
					<field name="vqir_state"/>
 			</tree>
		</field>
	</record> 
    	<!-- actions opening views on models -->
    	<record model="ir.actions.act_window" id="view_fos_vqir_report_1_action_window">
      		<field name="name">VQIR Report</field>
      		<field name="res_model">view.fos.vqir.report1</field>
      		<field name="view_mode">tree</field>
		<field name="view_type">form</field>
		<field name="search_view_id" ref="view_fos_vqir_report_search"/>
		<field name="context">{'search_default_year': 1}</field>
    	</record>

    	<!-- actions -->
    <menuitem name="VQIR Report" id="menu_vqir_report" 
        parent="menu_top_service" 
        sequence="3"
        groups="one.msd_administrators"
	    action="view_fos_vqir_report_1_action_window"/>
</odoo>