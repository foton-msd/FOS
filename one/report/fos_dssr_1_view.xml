<?xml version="1.0" encoding="utf-8"?>
<odoo>
	
	<record id="view_fos_dssr_1_search" model="ir.ui.view">
		<field name="name">view.fos.dssr.1.search</field>
		<field name="model">view.fos.dssr.1</field>
		<field name="arch" type="xml">
			<search string="DSSR Report - 1">
				<field name="repair_order_date" groups="base.group_no_one"/>
				<filter string="This Year" name="by_year" 
                    domain="[('repair_order_date','&lt;=', time.strftime('%%Y-12-31')),('repair_order_date','&gt;=',time.strftime('%%Y-01-01'))]"/>
 				<group expand="1" string="Group by">
                    <filter string="Customer" name="by_partner" domain="[]" context="{'group_by':'partner_id'}"/>
                    <filter string="Local Name" name="by_ln" domain="[]" context="{'group_by':'one_local_name_id'}"/>
                    <filter string="FOTON Number" name="by_fu" domain="[]" context="{'group_by':'fu_id'}"/>
                    <filter string="Repair Estimate" name="by_re" domain="[]" context="{'group_by':'sale_order_id'}"/>
                </group>
				
			</search>
		</field>		
	</record>
	
	<record model="ir.ui.view" id="view_fos_dssr_1_tree">
		<field name="name">view.fos.dssr.1.tree</field>
		<field name="model">view.fos.dssr.1</field>
		<field eval="8" name="priority"/>
		<field name="arch" type="xml">
			<tree string="DSSR-1 Analysis" create="false" edit="false" delete="false">
				<field name="partner_id"/>
				<field name="one_local_name_id"/>
				<field name="fu_id"/>
				<field name="run_km"/>
				<field name="sale_order_id"/>
				<field name="repair_order_id"/>
				<field name="fos_job_type_id"/>
				<field name="pn_lc"/>
				<field name="description"/>
 			</tree>
		</field>
	</record> 
	
	<record id="view_fos_dssr_1_pivot" model="ir.ui.view">
        <field name="name">view.fos.dssr.1.pivot</field>
        <field name="model">view.fos.dssr.1</field>
        <field name="arch" type="xml">
            <pivot string="VQIR Analysis" disable_linking="True">
                <field name="partner_id" type="row"/>
                <field name="one_local_name_id" type="count"/>
                <field name="fu_id" type="count"/>
            </pivot>
        </field>
    </record>
	
    <!-- actions opening views on models -->
    <record model="ir.actions.act_window" id="view_fos_dssr_1_action_window">
      	<field name="name">DSSR Report - 1</field>
      	<field name="res_model">view.fos.dssr.1</field>
		<field name="type">ir.actions.act_window</field>
      	<field name="view_mode">pivot,graph,tree</field>
		<field name="view_type">form</field>
		<field name="search_view_id" ref="view_fos_dssr_1_search"/>
		<field name="context">{'search_default_by_year': 1, 'search_default_by_ln': 1, 'search_default_by_partner': 1}</field>
    </record>

	<menuitem name="DSSR Report - 1" id="menu_fos_dssr_1" 
        parent="menu_warranty_reports" 
	    action="view_fos_dssr_1_action_window"/>
</odoo>